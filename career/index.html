<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Career Hub ‚Äî Command Center</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <style>
        /* ========== RESET & BASE ========== */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --bg: #0a0a0f;
            --bg-card: rgba(255, 255, 255, 0.04);
            --bg-card-hover: rgba(255, 255, 255, 0.07);
            --border: rgba(255, 255, 255, 0.08);
            --text: #e4e4e7;
            --text-dim: #71717a;
            --text-bright: #fafafa;
            --cyan: #22d3ee;
            --cyan-dim: rgba(34, 211, 238, 0.15);
            --blue: #3b82f6;
            --blue-dim: rgba(59, 130, 246, 0.15);
            --green: #4ade80;
            --green-dim: rgba(74, 222, 128, 0.15);
            --orange: #f59e0b;
            --orange-dim: rgba(245, 158, 11, 0.15);
            --red: #ef4444;
            --red-dim: rgba(239, 68, 68, 0.15);
            --purple: #a78bfa;
            --purple-dim: rgba(167, 139, 250, 0.15);
            --teal: #2dd4bf;
            --teal-dim: rgba(45, 212, 191, 0.15);
            --glass: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.06);
            --radius: 16px;
            --radius-sm: 10px;
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        html {
            font-size: 14px;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(ellipse at 20% 20%, rgba(34, 211, 238, 0.03) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(59, 130, 246, 0.03) 0%, transparent 50%);
            z-index: -1;
        }

        /* ========== SCROLLBAR ========== */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        /* ========== LAYOUT ========== */
        .app {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(10, 10, 15, 0.85);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            padding: 12px 24px;
        }

        .header-inner {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 16px;
            flex-wrap: wrap;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--text-bright);
            letter-spacing: -0.02em;
        }

        .brand-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--cyan), var(--blue));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #000;
            font-weight: 800;
        }

        .quick-links {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .quick-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-dim);
            font-size: 0.78rem;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.2s;
            cursor: pointer;
        }

        .quick-link:hover {
            background: var(--bg-card-hover);
            color: var(--text);
            border-color: rgba(255, 255, 255, 0.15);
        }

        .scorecard-bar {
            display: flex;
            gap: 24px;
            align-items: center;
            flex-wrap: wrap;
        }

        .score-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.82rem;
        }

        .score-ring {
            width: 36px;
            height: 36px;
            position: relative;
        }

        .score-ring svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .score-ring circle {
            fill: none;
            stroke-width: 3;
            cx: 18;
            cy: 18;
            r: 15;
        }

        .score-ring .bg {
            stroke: var(--border);
        }

        .score-ring .fill {
            stroke-linecap: round;
            transition: stroke-dashoffset 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .score-pct {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 0.6rem;
            font-weight: 700;
            color: var(--text-bright);
        }

        .main {
            flex: 1;
            max-width: 1600px;
            margin: 0 auto;
            width: 100%;
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            gap: 20px;
            padding: 20px 24px;
        }

        /* ========== CARDS ========== */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 20px;
            backdrop-filter: blur(12px);
            transition: border-color 0.2s;
        }

        .card:hover {
            border-color: rgba(255, 255, 255, 0.12);
        }

        .card-title {
            font-size: 0.72rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-dim);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-title .dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: inline-block;
        }

        /* ========== LEFT COLUMN ========== */
        .left-col {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .big-ring-wrap {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 28px 20px;
        }

        .big-ring {
            width: 140px;
            height: 140px;
            position: relative;
            margin-bottom: 12px;
        }

        .big-ring svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .big-ring circle {
            fill: none;
            cx: 70;
            cy: 70;
            r: 62;
        }

        .big-ring .bg {
            stroke: var(--border);
            stroke-width: 6;
        }

        .big-ring .fill {
            stroke-width: 6;
            stroke-linecap: round;
            transition: stroke-dashoffset 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .big-ring-pct {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .big-ring-pct .num {
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--text-bright);
            line-height: 1;
        }

        .big-ring-pct .label {
            font-size: 0.7rem;
            color: var(--text-dim);
            margin-top: 2px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.82rem;
        }

        .stat-row:last-child {
            border-bottom: none;
        }

        .stat-label {
            color: var(--text-dim);
        }

        .stat-value {
            font-weight: 700;
            color: var(--text-bright);
        }

        .stat-value.done {
            color: var(--green);
        }

        /* Pipeline */
        .pipeline-stage {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 0;
        }

        .stage-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .stage-label {
            flex: 1;
            font-size: 0.78rem;
            color: var(--text);
        }

        .stage-active {
            font-weight: 700;
            color: var(--text-bright);
        }

        .stage-line {
            width: 2px;
            height: 12px;
            margin-left: 4px;
            background: var(--border);
        }

        .stage-line.active {
            background: linear-gradient(180deg, var(--cyan), var(--blue));
        }

        /* Interviewer Cards */
        .interviewer {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 10px;
            border-radius: var(--radius-sm);
            background: rgba(255, 255, 255, 0.02);
            margin-bottom: 8px;
            transition: background 0.15s;
        }

        .interviewer:hover {
            background: var(--bg-card-hover);
        }

        .interviewer:last-child {
            margin-bottom: 0;
        }

        .interviewer-avatar {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 700;
            color: #000;
            flex-shrink: 0;
        }

        .interviewer-info {
            flex: 1;
            min-width: 0;
        }

        .interviewer-name {
            font-size: 0.82rem;
            font-weight: 600;
            color: var(--text-bright);
        }

        .interviewer-role {
            font-size: 0.68rem;
            color: var(--text-dim);
            margin-top: 1px;
        }

        .interviewer-tag {
            font-size: 0.6rem;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 6px;
            text-transform: uppercase;
            letter-spacing: 0.04em;
            margin-top: 4px;
            display: inline-block;
        }

        /* ========== CENTER COLUMN ========== */
        .center-col {
            display: flex;
            flex-direction: column;
            gap: 16px;
            min-width: 0;
        }

        .filters {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-btn {
            padding: 6px 14px;
            border-radius: 20px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text-dim);
            font-size: 0.78rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .filter-btn:hover {
            border-color: rgba(255, 255, 255, 0.2);
            color: var(--text);
        }

        .filter-btn.active {
            background: var(--cyan-dim);
            border-color: var(--cyan);
            color: var(--cyan);
        }

        .filter-btn.active[data-filter="followup"] {
            background: var(--orange-dim);
            border-color: var(--orange);
            color: var(--orange);
        }

        .filter-btn.active[data-filter="interview"] {
            background: var(--green-dim);
            border-color: var(--green);
            color: var(--green);
        }

        /* Task Sections */
        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px 0;
            cursor: pointer;
            user-select: none;
        }

        .section-title {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--text-bright);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-badge {
            font-size: 0.68rem;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: 600;
        }

        .section-chevron {
            transition: transform 0.3s;
            color: var(--text-dim);
            font-size: 0.8rem;
        }

        .section-header.collapsed .section-chevron {
            transform: rotate(-90deg);
        }

        .task-list {
            overflow: hidden;
            transition: max-height 0.4s ease, opacity 0.3s;
        }

        .task-list.collapsed {
            max-height: 0 !important;
            opacity: 0;
            pointer-events: none;
        }

        .task-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 10px 12px;
            border-radius: var(--radius-sm);
            transition: background 0.15s;
            cursor: default;
        }

        .task-item:hover {
            background: var(--bg-card-hover);
        }

        .task-item.you-task {
            border-left: 3px solid var(--orange);
        }

        .task-check {
            width: 22px;
            height: 22px;
            min-width: 22px;
            border-radius: 6px;
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.25s;
            margin-top: 1px;
            font-size: 0.7rem;
            color: transparent;
            position: relative;
        }

        .task-check:hover {
            border-color: var(--cyan);
        }

        .task-check[data-state="progress"] {
            border-color: var(--orange);
            background: var(--orange-dim);
            color: var(--orange);
        }

        .task-check[data-state="done"] {
            border-color: var(--green);
            background: var(--green-dim);
            color: var(--green);
        }

        .task-check[data-state="done"]::after {
            content: '‚úì';
            font-size: 0.85rem;
            font-weight: 700;
        }

        .task-check[data-state="progress"]::after {
            content: '';
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--orange);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.5;
                transform: scale(0.8);
            }
        }

        .task-content {
            flex: 1;
            min-width: 0;
        }

        .task-text {
            font-size: 0.85rem;
            color: var(--text);
            line-height: 1.45;
        }

        .task-item[data-status="done"] .task-text {
            text-decoration: line-through;
            opacity: 0.5;
        }

        .task-meta {
            display: flex;
            gap: 8px;
            margin-top: 4px;
            flex-wrap: wrap;
        }

        .task-tag {
            font-size: 0.65rem;
            font-weight: 600;
            padding: 2px 7px;
            border-radius: 6px;
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }

        .tag-you {
            background: var(--orange-dim);
            color: var(--orange);
        }

        .tag-done {
            background: var(--green-dim);
            color: var(--green);
        }

        /* ========== RIGHT COLUMN ========== */
        .right-col {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        /* Log */
        .log-entries {
            flex: 1;
            max-height: 350px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 12px;
        }

        .log-entry {
            padding: 10px 12px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: var(--radius-sm);
            border-left: 3px solid var(--border);
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-8px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .log-entry[data-tag="strategy"] {
            border-left-color: var(--blue);
        }

        .log-entry[data-tag="win"] {
            border-left-color: var(--green);
        }

        .log-entry[data-tag="concern"] {
            border-left-color: var(--red);
        }

        .log-entry[data-tag="note"] {
            border-left-color: var(--purple);
        }

        .log-time {
            font-size: 0.65rem;
            color: var(--text-dim);
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .log-tag {
            font-size: 0.6rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 1px 5px;
            border-radius: 4px;
        }

        .log-tag[data-tag="strategy"] {
            background: var(--blue-dim);
            color: var(--blue);
        }

        .log-tag[data-tag="win"] {
            background: var(--green-dim);
            color: var(--green);
        }

        .log-tag[data-tag="concern"] {
            background: var(--red-dim);
            color: var(--red);
        }

        .log-tag[data-tag="note"] {
            background: var(--purple-dim);
            color: var(--purple);
        }

        .log-text {
            font-size: 0.82rem;
            color: var(--text);
            line-height: 1.4;
        }

        .log-delete {
            background: none;
            border: none;
            color: var(--text-dim);
            cursor: pointer;
            font-size: 0.7rem;
            padding: 2px;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .log-entry:hover .log-delete {
            opacity: 1;
        }

        .log-delete:hover {
            color: var(--red);
        }

        .log-input-wrap {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .log-tags {
            display: flex;
            gap: 4px;
        }

        .log-tag-btn {
            padding: 4px 8px;
            border-radius: 6px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text-dim);
            font-size: 0.68rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .log-tag-btn:hover {
            border-color: rgba(255, 255, 255, 0.2);
        }

        .log-tag-btn.active {
            border-color: var(--cyan);
            color: var(--cyan);
            background: var(--cyan-dim);
        }

        .log-input {
            width: 100%;
            padding: 10px 14px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            color: var(--text);
            font-size: 0.85rem;
            font-family: inherit;
            resize: none;
            outline: none;
            transition: border-color 0.2s;
            min-height: 42px;
        }

        .log-input:focus {
            border-color: var(--cyan);
        }

        .log-input::placeholder {
            color: var(--text-dim);
        }

        .export-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            width: 100%;
            padding: 10px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            color: var(--text-dim);
            font-size: 0.78rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .export-btn:hover {
            background: var(--bg-card-hover);
            color: var(--text);
            border-color: rgba(255, 255, 255, 0.15);
        }

        .export-btn.copied {
            border-color: var(--green);
            color: var(--green);
        }

        /* Talking Point */
        .talking-point {
            display: flex;
            gap: 10px;
            padding: 8px 10px;
            border-radius: var(--radius-sm);
            background: rgba(255, 255, 255, 0.02);
            margin-bottom: 6px;
        }

        .talking-point:last-child {
            margin-bottom: 0;
        }

        .tp-num {
            width: 24px;
            height: 24px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 800;
            flex-shrink: 0;
            background: var(--cyan-dim);
            color: var(--cyan);
        }

        .tp-text {
            font-size: 0.78rem;
            color: var(--text);
            line-height: 1.4;
        }

        .tp-text strong {
            color: var(--text-bright);
        }

        .synced {
            text-align: center;
            font-size: 0.68rem;
            color: var(--text-dim);
            padding: 8px 0;
        }

        /* Document Links */
        .doc-link {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 10px;
            border-radius: var(--radius-sm);
            background: rgba(255, 255, 255, 0.02);
            margin-bottom: 4px;
            text-decoration: none;
            color: var(--text);
            transition: all 0.15s;
            cursor: pointer;
            border: 1px solid transparent;
        }

        .doc-link:hover {
            background: var(--bg-card-hover);
            border-color: var(--border);
        }

        .doc-icon {
            width: 28px;
            height: 28px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            flex-shrink: 0;
        }

        .doc-name {
            flex: 1;
            font-size: 0.78rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .doc-badge {
            font-size: 0.6rem;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 6px;
            text-transform: uppercase;
            letter-spacing: 0.03em;
            flex-shrink: 0;
        }

        .doc-section-label {
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            color: var(--text-dim);
            padding: 8px 0 4px;
            margin-top: 4px;
            border-top: 1px solid var(--border);
        }

        .doc-section-label:first-child {
            border-top: none;
            margin-top: 0;
            padding-top: 0;
        }

        .folder-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, rgba(34, 211, 238, 0.08), rgba(59, 130, 246, 0.08));
            border: 1px solid rgba(34, 211, 238, 0.2);
            border-radius: var(--radius-sm);
            color: var(--cyan);
            font-size: 0.82rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
        }

        .folder-btn:hover {
            background: linear-gradient(135deg, rgba(34, 211, 238, 0.15), rgba(59, 130, 246, 0.15));
            border-color: var(--cyan);
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(34, 211, 238, 0.15);
        }

        /* Countdown */
        .countdown {
            text-align: center;
            padding: 16px;
        }

        .countdown-label {
            font-size: 0.7rem;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: 8px;
        }

        .countdown-time {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--cyan), var(--blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
        }

        .countdown-detail {
            font-size: 0.72rem;
            color: var(--text-dim);
            margin-top: 4px;
        }

        /* ========== HAMBURGER NAV DRAWER ========== */
        .hamburger-btn {
            display: none;
            background: none;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            color: var(--text-dim);
            cursor: pointer;
            padding: 6px 10px;
            font-size: 1.1rem;
            transition: all 0.2s;
            min-height: 34px;
        }

        .hamburger-btn:hover {
            color: var(--text);
            border-color: var(--cyan);
        }

        .nav-drawer-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            -webkit-backdrop-filter: blur(6px);
            backdrop-filter: blur(6px);
            z-index: 500;
        }

        .nav-drawer-overlay.open {
            display: block;
        }

        .nav-drawer {
            position: fixed;
            top: 0;
            right: -300px;
            width: 280px;
            height: 100vh;
            background: #0f0f18;
            border-left: 1px solid var(--border);
            z-index: 501;
            padding: 20px;
            overflow-y: auto;
            transition: right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .nav-drawer.open {
            right: 0;
        }

        .nav-drawer-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
        }

        .nav-drawer-header span {
            font-weight: 700;
            color: var(--text-bright);
            font-size: 0.95rem;
        }

        .nav-drawer-close {
            background: none;
            border: none;
            color: var(--text-dim);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 4px 8px;
        }

        .nav-drawer-close:hover {
            color: var(--text);
        }

        .nav-drawer-section {
            font-size: 0.65rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            color: var(--text-dim);
            padding: 10px 0 4px;
            margin-top: 6px;
            border-top: 1px solid var(--border);
        }

        .nav-drawer-section:first-of-type {
            border-top: none;
            margin-top: 0;
            padding-top: 0;
        }

        .nav-drawer-link {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 12px;
            border-radius: var(--radius-sm);
            color: var(--text);
            text-decoration: none;
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.15s;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            font-family: inherit;
        }

        .nav-drawer-link:hover {
            background: var(--bg-card-hover);
            color: var(--text-bright);
        }

        /* ========== GIST SYNC SETTINGS ========== */
        .settings-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            -webkit-backdrop-filter: blur(8px);
            backdrop-filter: blur(8px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .settings-overlay.open {
            display: flex;
        }

        .settings-modal {
            background: #1a1a2e;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 28px;
            width: min(420px, 90vw);
            box-shadow: var(--shadow);
        }

        .settings-modal h3 {
            color: var(--text-bright);
            margin-bottom: 4px;
            font-size: 1.1rem;
        }

        .settings-modal .subtitle {
            color: var(--text-dim);
            font-size: 0.75rem;
            margin-bottom: 20px;
        }

        .settings-field {
            margin-bottom: 14px;
        }

        .settings-field label {
            display: block;
            color: var(--text-dim);
            font-size: 0.75rem;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .settings-field input {
            width: 100%;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            color: var(--text);
            padding: 10px 12px;
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            outline: none;
            transition: border-color 0.2s;
        }

        .settings-field input:focus {
            border-color: var(--cyan);
        }

        .settings-field input::placeholder {
            color: var(--text-dim);
        }

        .settings-actions {
            display: flex;
            gap: 10px;
            margin-top: 18px;
        }

        .settings-actions button {
            flex: 1;
            padding: 10px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            font-family: 'Inter', sans-serif;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-save {
            background: var(--cyan);
            color: #000;
            border-color: var(--cyan) !important;
            font-weight: 600;
        }

        .btn-save:hover {
            opacity: 0.9;
        }

        .btn-cancel {
            background: transparent;
            color: var(--text-dim);
        }

        .btn-cancel:hover {
            color: var(--text);
        }

        .btn-test {
            background: var(--blue-dim);
            color: var(--blue);
            border-color: rgba(59, 130, 246, 0.3) !important;
        }

        .btn-test:hover {
            opacity: 0.9;
        }

        .sync-status {
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .sync-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--text-dim);
            transition: background 0.3s;
        }

        .sync-dot.synced {
            background: var(--green);
        }

        .sync-dot.syncing {
            background: var(--cyan);
            animation: pulse-dot 1s infinite;
        }

        .sync-dot.error {
            background: var(--red);
        }

        @keyframes pulse-dot {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.3;
            }
        }

        .gear-btn {
            background: none;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            color: var(--text-dim);
            cursor: pointer;
            padding: 6px 10px;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .gear-btn:hover {
            color: var(--text);
            border-color: var(--cyan);
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 1100px) {
            .main {
                grid-template-columns: 1fr;
            }

            .left-col {
                flex-direction: row;
                flex-wrap: wrap;
                gap: 12px;
            }

            .left-col .card {
                flex: 1;
                min-width: 200px;
            }

            .right-col {
                order: -1;
            }
        }

        @media (max-width: 600px) {
            html {
                font-size: 13px;
            }

            .header {
                padding: 8px 12px;
            }

            .header-inner {
                gap: 8px;
            }

            .brand {
                font-size: 0.95rem;
                gap: 8px;
            }

            .brand-icon {
                width: 28px;
                height: 28px;
                font-size: 13px;
                border-radius: 6px;
            }

            /* Hide desktop links, show hamburger */
            .quick-links {
                display: none;
            }

            .hamburger-btn {
                display: inline-flex;
            }

            /* Scorecard compact */
            .scorecard-bar {
                gap: 14px;
            }

            .score-item {
                font-size: 0.75rem;
            }

            .score-label {
                display: none;
            }

            .score-ring {
                width: 30px;
                height: 30px;
            }

            /* Main tighter */
            .main {
                padding: 12px;
                gap: 12px;
            }

            .left-col {
                flex-direction: column;
            }

            .left-col .card {
                min-width: 100%;
            }

            .big-ring-wrap {
                padding: 20px 16px;
            }

            .big-ring {
                width: 110px;
                height: 110px;
            }

            .big-ring-pct .num {
                font-size: 1.8rem;
            }

            .card {
                padding: 14px;
                border-radius: 12px;
            }

            .task-item {
                padding: 10px;
                gap: 8px;
            }

            .task-check {
                width: 26px;
                height: 26px;
                min-width: 26px;
                border-radius: 8px;
            }

            .task-text {
                font-size: 0.82rem;
            }

            .section-header {
                padding: 12px 0;
            }

            .log-entries {
                max-height: 200px;
            }

            .log-input {
                font-size: 0.85rem;
                min-height: 40px;
            }

            .filters {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none;
                flex-wrap: nowrap;
            }

            .filters::-webkit-scrollbar {
                display: none;
            }

            .filter-btn {
                white-space: nowrap;
                flex-shrink: 0;
                min-height: 34px;
            }

            .export-btn {
                min-height: 40px;
            }

            .settings-modal {
                width: 95vw;
                padding: 20px;
            }
        }

        /* iPhone SE and very small screens */
        @media (max-width: 380px) {
            html {
                font-size: 12px;
            }

            .main {
                padding: 8px;
                gap: 10px;
            }

            .brand span {
                display: none;
            }

            .scorecard-bar {
                gap: 10px;
            }

            .score-ring {
                width: 26px;
                height: 26px;
            }

            .big-ring {
                width: 90px;
                height: 90px;
            }

            .big-ring-pct .num {
                font-size: 1.4rem;
            }
        }

        /* Confetti Canvas */
        #confettiCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 9999;
        }

        /* Sparkle burst for task completion */
        .sparkle {
            position: fixed;
            pointer-events: none;
            font-size: 1.2rem;
            z-index: 9998;
            animation: sparkle-fly 0.8s ease-out forwards;
        }

        @keyframes sparkle-fly {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }

            100% {
                opacity: 0;
                transform: translate(var(--sx), var(--sy)) scale(0.3);
            }
        }
    </style>
</head>

<body>

    <canvas id="confettiCanvas"></canvas>

    <div class="app">
        <!-- HEADER -->
        <header class="header">
            <div class="header-inner">
                <div style="display:flex;align-items:center;gap:12px;flex:1;min-width:0;">
                    <div class="brand">
                        <div class="brand-icon">CH</div>
                        <span>Career Hub</span>
                    </div>
                    <div class="scorecard-bar" id="scorecard"></div>
                    <button class="hamburger-btn" onclick="toggleDrawer()" title="Menu">‚ò∞</button>
                </div>
                <div class="quick-links">
                    <a class="quick-link" href="../index.html">üè† Hub</a>
                    <a class="quick-link" href="docs/panel_review_interview_strategy.md">üìã Strategy</a>
                    <a class="quick-link" href="docs/interview_questions.md">‚ùì Questions</a>
                    <a class="quick-link" href="docs/company_research.md">üè¢ Company</a>
                    <a class="quick-link" href="docs/salary_research.md">üí∞ Salary</a>
                    <button class="quick-link" onclick="exportSnapshot()">üìã Export</button>
                    <button class="gear-btn" onclick="toggleSettings()" title="Sync Settings">‚öôÔ∏è</button>
                </div>
            </div>
        </header>

        <!-- NAV DRAWER -->
        <div class="nav-drawer-overlay" id="navOverlay" onclick="toggleDrawer()"></div>
        <div class="nav-drawer" id="navDrawer">
            <div class="nav-drawer-header">
                <span>‚ò∞ Navigation</span>
                <button class="nav-drawer-close" onclick="toggleDrawer()">‚úï</button>
            </div>
            <div class="nav-drawer-section">Navigate</div>
            <a class="nav-drawer-link" href="../index.html">üè† Back to Hub</a>
            <a class="nav-drawer-link" href="../business/index.html">üìä Business Dashboard</a>
            <div class="nav-drawer-section">Interview Prep</div>
            <a class="nav-drawer-link" href="docs/panel_review_interview_strategy.md">üìã Strategy & Talking Points</a>
            <a class="nav-drawer-link" href="docs/interview_questions.md">‚ùì Interview Questions</a>
            <a class="nav-drawer-link" href="docs/company_research.md">üè¢ Company Research</a>
            <a class="nav-drawer-link" href="docs/salary_research.md">üí∞ Salary Research</a>
            <div class="nav-drawer-section">Actions</div>
            <button class="nav-drawer-link" onclick="exportSnapshot(); toggleDrawer();">üìã Export Snapshot</button>
            <button class="nav-drawer-link" onclick="copyLogNotes(); toggleDrawer();">üì§ Copy Notes</button>
            <button class="nav-drawer-link" onclick="toggleDrawer(); toggleSettings();">‚öôÔ∏è Sync Settings</button>
        </div>

        <!-- SETTINGS MODAL -->
        <div class="settings-overlay" id="settingsOverlay" onclick="if(event.target===this)toggleSettings()">
            <div class="settings-modal">
                <h3>‚òÅÔ∏è Cloud Sync Settings</h3>
                <div class="subtitle">Sync career hub state across devices via a private GitHub Gist. Credentials are
                    stored only
                    in this browser's localStorage ‚Äî never committed to any repo.</div>
                <div class="settings-field">
                    <label>Gist ID</label>
                    <input type="text" id="gistIdInput" placeholder="e.g. a1b2c3d4e5f6..." />
                </div>
                <div class="settings-field">
                    <label>GitHub Personal Access Token (gist scope only)</label>
                    <input type="password" id="gistPatInput" placeholder="ghp_xxxxxxxxxxxx" />
                </div>
                <div class="settings-actions">
                    <button class="btn-cancel" onclick="toggleSettings()">Cancel</button>
                    <button class="btn-test" id="testSyncBtn" onclick="testGistConnection()">Test Connection</button>
                    <button class="btn-save" onclick="saveGistSettings()">Save</button>
                </div>
            </div>
        </div>

        <!-- MAIN -->
        <div class="main">
            <!-- LEFT -->
            <aside class="left-col">
                <div class="card countdown" id="countdown"></div>

                <div class="card big-ring-wrap" id="overallProgress"></div>

                <div class="card">
                    <div class="card-title"><span class="dot" style="background:var(--cyan)"></span> Pipeline Stage
                    </div>
                    <div id="pipelinePanel"></div>
                </div>

                <div class="card">
                    <div class="card-title"><span class="dot" style="background:var(--purple)"></span> Interview Panel
                    </div>
                    <div id="interviewerPanel"></div>
                </div>
            </aside>

            <!-- CENTER -->
            <main class="center-col">
                <div class="card" style="padding:12px 16px;">
                    <div class="filters" id="filters"></div>
                </div>
                <div id="taskSections"></div>
            </main>

            <!-- RIGHT -->
            <aside class="right-col">
                <div class="card">
                    <div class="card-title"><span class="dot" style="background:var(--cyan)"></span> Top 5 Talking
                        Points</div>
                    <div id="talkingPoints"></div>
                </div>

                <div class="card">
                    <div class="card-title"><span class="dot" style="background:var(--green)"></span> Printable
                        Documents (PDF)</div>
                    <div id="docLinks"></div>
                    <button class="folder-btn" style="margin-top:12px;" onclick="openFolder()">üìÇ Show in File
                        Explorer</button>
                </div>

                <div class="card" style="display:flex;flex-direction:column;flex:1;">
                    <div class="card-title"><span class="dot" style="background:var(--blue)"></span> Prep Notes</div>
                    <div class="log-entries" id="logEntries"></div>
                    <div class="log-input-wrap">
                        <div class="log-tags" id="logTags"></div>
                        <textarea class="log-input" id="logInput" placeholder="Log a note... (Enter to save)"
                            rows="1"></textarea>
                    </div>
                </div>
                <button class="export-btn" onclick="copyLogNotes()" id="copyNotesBtn">üì§ Copy Notes to
                    Clipboard</button>
                <button class="export-btn" onclick="exportSnapshot()">üìã Export Snapshot to Clipboard</button>
                <div class="synced" id="syncedTime"></div>
            </aside>
        </div>
    </div>

    <script>
        // ==================== DATA ====================
        const TASK_DATA = {
            follow_up: {
                area: "followup", title: "Post-Interview Follow-Up", badge: "Now", badgeColor: "var(--red)",
                tasks: [
                    { id: "f1", text: "Review & personalize thank-you email draft", you: true },
                    { id: "f2", text: "Send thank-you email to Mary Gallian (within 24‚Äì48 hrs)", you: true },
                    { id: "f3", text: "Fill out Sterling Reference Request Form (.doc) ‚Äî top 3 refs", you: true },
                    { id: "f4", text: "Text William Carter ‚Äî heads-up that Sterling/AbbVie may reach out", you: true },
                    { id: "f5", text: "Text Simon Sopt ‚Äî heads-up that Sterling/AbbVie may reach out", you: true },
                    { id: "f6", text: "Text Ike Riley Jr ‚Äî heads-up that Sterling/AbbVie may reach out", you: true }
                ]
            },
            interview_done: {
                area: "interview", title: "Interview ‚Äî Completed ‚úì", badge: "Done", badgeColor: "var(--green)",
                tasks: [
                    { id: "i1", text: "Interview with AbbVie panel ‚Äî went well, panel was receptive", preChecked: true },
                    { id: "i2", text: "Hit all talking points ‚Äî Siemens BAS, critical environment, compliance", preChecked: true },
                    { id: "i3", text: "Stayed honest about position, experience, and willingness to learn", preChecked: true },
                    { id: "i4", text: "Thank-you email drafted", preChecked: true }
                ]
            },
            docs: {
                area: "docs", title: "Documents & Materials", badge: "Ready", badgeColor: "var(--green)",
                tasks: [
                    { id: "d1", text: "Resume uploaded to Documents/Resume Versions/", preChecked: true },
                    { id: "d2", text: "Tailored BAS-focused resume draft created", preChecked: true },
                    { id: "d3", text: "Reference list staged in Resources/References/", preChecked: true },
                    { id: "d4", text: "Certifications summary created", preChecked: true },
                    { id: "d5", text: "Interview questions prepared", preChecked: true },
                    { id: "d6", text: "Panel review strategy doc complete + Sterling guidance", preChecked: true },
                    { id: "d7", text: "Thank-you email draft ready for review", preChecked: true }
                ]
            },
            research: {
                area: "research", title: "Research & Intelligence", badge: "Complete", badgeColor: "var(--green)",
                tasks: [
                    { id: "r1", text: "LinkedIn dossier ‚Äî Gino Pisano (HVAC Controls SW Dev, peer)", preChecked: true },
                    { id: "r2", text: "LinkedIn dossier ‚Äî John Walters (Assoc. Director, hiring mgr)", preChecked: true },
                    { id: "r3", text: "LinkedIn dossier ‚Äî Michael Ester (27-yr Controls Engineer)", preChecked: true },
                    { id: "r4", text: "Company research ‚Äî Sterling Engineering + AbbVie", preChecked: true },
                    { id: "r5", text: "Salary & rate research with positioning analysis", preChecked: true },
                    { id: "r6", text: "Full job description extracted and summarized", preChecked: true },
                    { id: "r7", text: "Reference selection ‚Äî top 3 ranked with reasoning", preChecked: true },
                    { id: "r8", text: "Sterling HR guides extracted and integrated", preChecked: true }
                ]
            }
        };

        const AREA_META = {
            followup: { label: "Follow-Up", color: "var(--orange)" },
            interview: { label: "Interview", color: "var(--green)" },
            docs: { label: "Docs", color: "var(--purple)" },
            research: { label: "Research", color: "var(--teal)" }
        };

        const INTERVIEWERS = [
            { name: "John Walters", role: "Associate Director, Global Facilities Engineering", tag: "Hiring Manager", tagColor: "var(--cyan)", avatar: "JW", avatarBg: "linear-gradient(135deg, var(--cyan), var(--blue))", focus: "Project delivery, communication, team fit" },
            { name: "Gino Pisano", role: "HVAC Controls Software Developer", tag: "Technical Peer", tagColor: "var(--green)", avatar: "GP", avatarBg: "linear-gradient(135deg, var(--green), var(--teal))", focus: "PPCL, Siemens platforms, BACnet, troubleshooting" },
            { name: "Michael Ester", role: "HVAC Controls Engineer (27 yrs)", tag: "Senior Authority", tagColor: "var(--purple)", avatar: "ME", avatarBg: "linear-gradient(135deg, var(--purple), var(--blue))", focus: "Respect, reliability, legacy system knowledge" }
        ];

        const PIPELINE_STAGES = [
            { label: "Identified", done: true },
            { label: "Applied / Submitted", done: true },
            { label: "Screening Call", done: true },
            { label: "Interview ‚úì", done: true },
            { label: "Awaiting Decision", active: true },
            { label: "Offer", done: false },
            { label: "Accepted", done: false }
        ];

        const TALKING_POINTS = [
            { text: "<strong>Siemens BAS Console Operator</strong> ‚Äî Ran Apogee & Insight live in production at CyrusOne. 2.1M sq ft campus." },
            { text: "<strong>Critical Environment Pedigree</strong> ‚Äî Microsoft L4 tech. CyrusOne campus. You know what 'no downtime' means." },
            { text: "<strong>Formal Controls Education</strong> ‚Äî Pneumatic & Digital Controls at Triton/Local 399 + HVAC at ECC." },
            { text: "<strong>Multi-Platform BAS Fluency</strong> ‚Äî Siemens Apogee, Insight, Delta Controls, TAC/IA. Context-switch ready." },
            { text: "<strong>Documentation & Compliance</strong> ‚Äî MOP/SOP discipline, ticketing (Corrigo, MCIM), ready for GxP." }
        ];

        const LOG_TAGS = ["strategy", "win", "concern", "note"];

        // ==================== STATE ====================
        let state = loadState();

        function loadState() {
            try {
                const saved = localStorage.getItem('career_hub_state');
                if (saved) return JSON.parse(saved);
            } catch (e) { }
            return { tasks: {}, logs: [], collapsed: {} };
        }

        function saveState() {
            localStorage.setItem('career_hub_state', JSON.stringify(state));
            debouncedGistSync();
        }

        function getTaskState(id) {
            const saved = state.tasks[id];
            if (saved) return saved;
            // Check pre-checked items
            const allTasks = getAllTasks();
            const task = allTasks.find(t => t.id === id);
            if (task && task.preChecked) return "done";
            return "todo";
        }

        function cycleTask(id, evt) {
            const current = getTaskState(id);
            const next = current === "todo" ? "progress" : current === "progress" ? "done" : "todo";
            state.tasks[id] = next;
            saveState();

            // Sparkle burst on task completion
            if (next === "done" && evt) {
                sparkle(evt.clientX, evt.clientY);
            }

            render();

            // Check for 100% overall ‚Äî big confetti
            const all = getAllTasks();
            const doneCount = all.filter(t => getTaskState(t.id) === "done").length;
            if (doneCount === all.length && all.length > 0) {
                launchConfetti();
            }
        }

        // ==================== RENDER ====================
        let activeFilter = "all";

        function render() {
            renderCountdown();
            renderScorecard();
            renderProgress();
            renderPipeline();
            renderInterviewers();
            renderTalkingPoints();
            renderDocLinks();
            renderFilters();
            renderTasks();
            renderLog();
            renderSynced();
        }

        function renderCountdown() {
            const wrap = document.getElementById('countdown');
            wrap.innerHTML = `
          <div class="countdown-label">Interview Complete</div>
          <div class="countdown-time" style="font-size:1.4rem;">‚úì CRUSHED IT</div>
          <div class="countdown-detail" style="margin-top:8px;">AbbVie / Sterling Engineering ¬∑ Feb 10, 2026</div>
          <div style="font-size:0.72rem;color:var(--green);margin-top:6px;">Panel receptive ¬∑ All talking points hit ¬∑ Honest & authentic</div>`;
        }

        function renderScorecard() {
            const bar = document.getElementById('scorecard');
            const areas = ["followup", "interview", "docs", "research"];
            bar.innerHTML = areas.map(a => {
                const tasks = getAllTasksForArea(a);
                const done = tasks.filter(t => getTaskState(t.id) === "done").length;
                const pct = tasks.length ? Math.round((done / tasks.length) * 100) : 0;
                const circ = 2 * Math.PI * 15;
                const offset = circ - (pct / 100) * circ;
                return `<div class="score-item">
          <div class="score-ring">
            <svg viewBox="0 0 36 36">
              <circle class="bg" cx="18" cy="18" r="15"/>
              <circle class="fill" cx="18" cy="18" r="15" stroke="${AREA_META[a].color}"
                stroke-dasharray="${circ}" stroke-dashoffset="${offset}"/>
            </svg>
            <span class="score-pct">${pct}%</span>
          </div>
          <span class="score-label" style="color:var(--text-dim);font-size:0.75rem;">${AREA_META[a].label}</span>
        </div>`;
            }).join('');
        }

        function renderProgress() {
            const wrap = document.getElementById('overallProgress');
            const all = getAllTasks();
            const done = all.filter(t => getTaskState(t.id) === "done").length;
            const progress = all.filter(t => getTaskState(t.id) === "progress").length;
            const pct = all.length ? Math.round((done / all.length) * 100) : 0;
            const circ = 2 * Math.PI * 62;
            const offset = circ - (pct / 100) * circ;
            wrap.innerHTML = `
        <div class="big-ring">
          <svg viewBox="0 0 140 140">
            <circle class="bg" cx="70" cy="70" r="62"/>
            <circle class="fill" cx="70" cy="70" r="62" stroke="url(#cyanGrad)"
              stroke-dasharray="${circ}" stroke-dashoffset="${offset}"/>
            <defs><linearGradient id="cyanGrad" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="var(--cyan)"/>
              <stop offset="100%" stop-color="var(--blue)"/>
            </linearGradient></defs>
          </svg>
          <div class="big-ring-pct">
            <div class="num">${pct}%</div>
            <div class="label">${done}/${all.length} ready</div>
          </div>
        </div>
        <div style="font-size:0.72rem;color:var(--text-dim);text-align:center;">
          ${progress} in progress ¬∑ ${all.length - done - progress} remaining
        </div>`;
        }

        function renderPipeline() {
            const panel = document.getElementById('pipelinePanel');
            let html = '';
            PIPELINE_STAGES.forEach((s, i) => {
                const isActive = s.active;
                const isDone = s.done;
                const dotColor = isDone ? 'var(--green)' : isActive ? 'var(--cyan)' : 'var(--border)';
                const dotStyle = isActive ? `box-shadow: 0 0 8px var(--cyan); animation: pulse 1.5s infinite;` : '';
                html += `<div class="pipeline-stage">
          <div class="stage-dot" style="background:${dotColor};${dotStyle}"></div>
          <div class="stage-label ${isActive ? 'stage-active' : ''}" style="${isDone ? 'color:var(--green);' : ''}">${s.label}</div>
          ${isDone ? '<span style="font-size:0.7rem;color:var(--green);">‚úì</span>' : ''}
          ${isActive ? '<span style="font-size:0.68rem;color:var(--cyan);font-weight:600;">‚Üê YOU ARE HERE</span>' : ''}
        </div>`;
                if (i < PIPELINE_STAGES.length - 1) {
                    html += `<div class="stage-line ${isDone || isActive ? 'active' : ''}"></div>`;
                }
            });
            panel.innerHTML = html;
        }

        function renderInterviewers() {
            const panel = document.getElementById('interviewerPanel');
            panel.innerHTML = INTERVIEWERS.map(p => `
        <div class="interviewer">
          <div class="interviewer-avatar" style="background:${p.avatarBg}">${p.avatar}</div>
          <div class="interviewer-info">
            <div class="interviewer-name">${p.name}</div>
            <div class="interviewer-role">${p.role}</div>
            <span class="interviewer-tag" style="background:${p.tagColor}20;color:${p.tagColor}">${p.tag}</span>
            <div style="font-size:0.68rem;color:var(--text-dim);margin-top:4px;">Focus: ${p.focus}</div>
          </div>
        </div>`).join('');
        }

        function renderTalkingPoints() {
            const wrap = document.getElementById('talkingPoints');
            wrap.innerHTML = TALKING_POINTS.map((tp, i) => `
        <div class="talking-point">
          <div class="tp-num">${i + 1}</div>
          <div class="tp-text">${tp.text}</div>
        </div>`).join('');
        }

        function renderFilters() {
            const wrap = document.getElementById('filters');
            const items = [
                { key: "all", label: "All" },
                { key: "followup", label: "‚ö° Follow-Up" },
                { key: "interview", label: "‚úÖ Interview" },
                { key: "docs", label: "üìÑ Docs" },
                { key: "research", label: "üîç Research" }
            ];
            wrap.innerHTML = items.map(f =>
                `<button class="filter-btn ${activeFilter === f.key ? 'active' : ''}" data-filter="${f.key}" onclick="setFilter('${f.key}')">${f.label}</button>`
            ).join('');
        }

        function setFilter(f) {
            activeFilter = f;
            render();
        }

        function renderTasks() {
            const container = document.getElementById('taskSections');
            let html = '';
            for (const [sectionId, section] of Object.entries(TASK_DATA)) {
                if (activeFilter !== "all" && section.area !== activeFilter) continue;
                const isCollapsed = state.collapsed[sectionId];
                const tasks = section.tasks;
                const done = tasks.filter(t => getTaskState(t.id) === "done").length;
                html += `
          <div class="card task-section" style="margin-bottom:12px;">
            <div class="section-header ${isCollapsed ? 'collapsed' : ''}" onclick="toggleSection('${sectionId}')">
              <div class="section-title">
                <span>${section.title}</span>
                <span class="section-badge" style="background:${section.badgeColor}20;color:${section.badgeColor}">${section.badge}</span>
                <span style="font-size:0.72rem;color:var(--text-dim);font-weight:400;">${done}/${tasks.length}</span>
              </div>
              <span class="section-chevron">‚ñº</span>
            </div>
            <div class="task-list ${isCollapsed ? 'collapsed' : ''}" style="max-height:${isCollapsed ? 0 : tasks.length * 60 + 100}px;">
              ${tasks.map(t => renderTaskItem(t)).join('')}
            </div>
          </div>`;
            }
            container.innerHTML = html;
        }

        function renderTaskItem(t) {
            const s = getTaskState(t.id);
            const isYou = t.you && s !== "done";
            return `
        <div class="task-item ${isYou ? 'you-task' : ''}" data-status="${s}">
          <div class="task-check" data-state="${s}" onclick="cycleTask('${t.id}', event)" title="Click to cycle: Not Started ‚Üí In Progress ‚Üí Done"></div>
          <div class="task-content">
            <div class="task-text">${t.text}</div>
            <div class="task-meta">
              ${isYou ? '<span class="task-tag tag-you">üë§ You</span>' : ''}
              ${s === 'done' && !t.you ? '<span class="task-tag tag-done">‚úÖ Done</span>' : ''}
            </div>
          </div>
        </div>`;
        }

        function toggleSection(id) {
            state.collapsed[id] = !state.collapsed[id];
            saveState();
            render();
        }

        // ==================== LOG ====================
        let activeLogTag = null;

        function renderLog() {
            const entries = document.getElementById('logEntries');
            const tags = document.getElementById('logTags');

            tags.innerHTML = LOG_TAGS.map(t =>
                `<button class="log-tag-btn ${activeLogTag === t ? 'active' : ''}" onclick="toggleLogTag('${t}')">#${t}</button>`
            ).join('');

            if (!state.logs.length) {
                entries.innerHTML = `<div style="text-align:center;padding:30px 10px;color:var(--text-dim);font-size:0.8rem;">
          No entries yet.<br>Log interview notes below.
        </div>`;
                return;
            }

            entries.innerHTML = state.logs.slice().reverse().map((log, i) => `
        <div class="log-entry" data-tag="${log.tag || ''}">
          <div class="log-time">
            <span>${log.time}</span>
            <span style="display:flex;align-items:center;gap:6px;">
              ${log.tag ? `<span class="log-tag" data-tag="${log.tag}">#${log.tag}</span>` : ''}
              <button class="log-delete" onclick="deleteLog(${state.logs.length - 1 - i})" title="Delete">‚úï</button>
            </span>
          </div>
          <div class="log-text">${log.text}</div>
        </div>`).join('');

            entries.scrollTop = 0;
        }

        function toggleLogTag(tag) {
            activeLogTag = activeLogTag === tag ? null : tag;
            renderLog();
        }

        function addLog(text) {
            if (!text.trim()) return;
            const now = new Date();
            const time = now.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }) + ' ¬∑ ' +
                now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
            state.logs.push({ text: text.trim(), tag: activeLogTag, time });
            activeLogTag = null;
            saveState();
            renderLog();
        }

        function deleteLog(idx) {
            state.logs.splice(idx, 1);
            saveState();
            renderLog();
        }

        function renderSynced() {
            const cfg = getGistConfig();
            const timeStr = lastSyncTime
                ? lastSyncTime.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })
                : null;
            const syncMsg = cfg
                ? (timeStr ? `‚òÅÔ∏è Synced at ${timeStr}` : '‚òÅÔ∏è Gist connected ¬∑ waiting for first sync')
                : 'üíæ Local only ¬∑ click ‚öôÔ∏è to enable cloud sync';
            document.getElementById('syncedTime').innerHTML =
                `<span class="sync-status"><span class="sync-dot ${cfg ? (lastSyncTime ? 'synced' : '') : ''}" id="syncDot"></span> ${syncMsg}</span>`;
        }

        // ==================== EXPORT ====================
        function exportSnapshot() {
            const all = getAllTasks();
            const done = all.filter(t => getTaskState(t.id) === "done");
            const inProg = all.filter(t => getTaskState(t.id) === "progress");
            const todo = all.filter(t => getTaskState(t.id) === "todo");
            let txt = `# Career Hub ‚Äî Interview Prep Snapshot\n`;
            txt += `Date: ${new Date().toLocaleDateString()}\n`;
            txt += `Opportunity: AbbVie / Sterling Engineering ‚Äî Building Automation Controls Engineer\n\n`;
            txt += `## Readiness: ${Math.round((done.length / all.length) * 100)}%\n`;
            txt += `- Total: ${all.length} | Done: ${done.length} | In Progress: ${inProg.length} | Remaining: ${todo.length}\n\n`;
            const youTasks = todo.filter(t => t.you);
            if (youTasks.length) {
                txt += `## Still Need To Do\n`;
                youTasks.forEach(t => txt += `- [ ] ${t.text}\n`);
                txt += '\n';
            }
            if (state.logs.length) {
                txt += `## Prep Notes\n`;
                state.logs.slice(-10).forEach(l => txt += `- [${l.time}] ${l.tag ? '#' + l.tag + ' ' : ''}${l.text}\n`);
            }
            navigator.clipboard.writeText(txt).then(() => {
                const btn = document.querySelector('.export-btn');
                btn.classList.add('copied');
                btn.textContent = '‚úÖ Copied to clipboard!';
                setTimeout(() => {
                    btn.classList.remove('copied');
                    btn.innerHTML = 'üìã Export Snapshot to Clipboard';
                }, 2000);
            });
        }

        // ==================== PRINTABLE DOCS ====================
        const BASE = 'docs';
        const PRINTABLE_DOCS = [
            {
                section: '‚ö° Post-Interview', docs: [
                    { name: 'Thank-You Email Draft', file: `${BASE}/thank_you_email_draft.pdf`, icon: '‚úâÔ∏è', color: 'var(--cyan)' },
                    { name: 'Reference Listing for Sterling', file: `${BASE}/Justice_McKinney_Reference_Listing.pdf`, icon: 'üë•', color: 'var(--orange)' },
                ]
            },
            {
                section: 'Must-Read', docs: [
                    { name: 'Interview Strategy & Talking Points', file: `${BASE}/panel_review_interview_strategy.pdf`, icon: 'üéØ', color: 'var(--cyan)' },
                    { name: 'Tailored Resume (BAS-Focused)', file: `${BASE}/Justice_McKinney_BAS_Focused.pdf`, icon: 'üìÑ', color: 'var(--blue)' },
                    { name: 'Interview Questions', file: `${BASE}/interview_questions.pdf`, icon: '‚ùì', color: 'var(--purple)' },
                ]
            },
            {
                section: 'Research', docs: [
                    { name: 'Company Research ‚Äî AbbVie & Sterling', file: `${BASE}/company_research.pdf`, icon: 'üè¢', color: 'var(--teal)' },
                    { name: 'Salary & Rate Research', file: `${BASE}/salary_research.pdf`, icon: 'üí∞', color: 'var(--green)' },
                    { name: 'Reference Selection Strategy', file: `${BASE}/reference_selection.pdf`, icon: 'üë•', color: 'var(--blue)' },
                ]
            },
            {
                section: 'Dossiers', docs: [
                    { name: 'John Walters ‚Äî Hiring Manager', file: `${BASE}/john_walters.pdf`, icon: 'üëî', color: 'var(--cyan)' },
                    { name: 'Gino Pisano ‚Äî Technical Peer', file: `${BASE}/gino_pisano.pdf`, icon: 'üîß', color: 'var(--green)' },
                    { name: 'Michael Ester ‚Äî Senior Authority', file: `${BASE}/michael_ester.pdf`, icon: 'üèóÔ∏è', color: 'var(--purple)' },
                ]
            },
            {
                section: 'Supporting Docs', docs: [
                    { name: 'Certifications Summary', file: `${BASE}/certifications_summary.pdf`, icon: 'üéì', color: 'var(--orange)' },
                    { name: 'Screening Call Notes', file: `${BASE}/2026-02-09_screening_call.pdf`, icon: 'üìû', color: 'var(--teal)' },
                    { name: 'Action Items', file: `${BASE}/action_items.pdf`, icon: '‚úÖ', color: 'var(--green)' },
                    { name: 'Opportunity Summary', file: `${BASE}/_summary.pdf`, icon: 'üìã', color: 'var(--blue)' },
                ]
            },
            {
                section: 'Sterling HR Guides', docs: [
                    { name: 'Video Interview Guide', file: `${BASE}/Sterling Engineering 1.7.22 Guide to Video Interviews.pdf`, icon: 'üé•', color: 'var(--orange)' },
                    { name: 'Interview Prep Guide', file: `${BASE}/Sterling Engineering 4.12.22 Interview prep concise guide.pdf`, icon: 'üìö', color: 'var(--purple)' },
                ]
            }
        ];

        function renderDocLinks() {
            const wrap = document.getElementById('docLinks');
            let html = '';
            PRINTABLE_DOCS.forEach(section => {
                html += `<div class="doc-section-label">${section.section}</div>`;
                section.docs.forEach(d => {
                    html += `
                <a class="doc-link" href="${d.file}" target="_blank" title="Open ${d.name}">
                  <div class="doc-icon" style="background:${d.color}20;color:${d.color}">${d.icon}</div>
                  <div class="doc-name">${d.name}</div>
                  <span class="doc-badge" style="background:${d.badge === 'DRAFT' ? 'var(--orange-dim)' : 'var(--green-dim)'};color:${d.badge === 'DRAFT' ? 'var(--orange)' : 'var(--green)'}">${d.badge || 'PDF'}</span>
                </a>`;
                });
            });
            wrap.innerHTML = html;
        }

        // ==================== CELEBRATIONS ====================
        const sparkleEmojis = ['‚ú®', '‚≠ê', 'üåü', 'üí´', 'üéâ'];

        function sparkle(x, y) {
            for (let i = 0; i < 6; i++) {
                const el = document.createElement('div');
                el.className = 'sparkle';
                el.textContent = sparkleEmojis[Math.floor(Math.random() * sparkleEmojis.length)];
                const angle = (Math.PI * 2 / 6) * i + Math.random() * 0.5;
                const dist = 40 + Math.random() * 30;
                el.style.left = x + 'px';
                el.style.top = y + 'px';
                el.style.setProperty('--sx', Math.cos(angle) * dist + 'px');
                el.style.setProperty('--sy', Math.sin(angle) * dist - 20 + 'px');
                document.body.appendChild(el);
                setTimeout(() => el.remove(), 850);
            }
        }

        function launchConfetti() {
            const canvas = document.getElementById('confettiCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            const colors = [
                '#22d3ee', '#3b82f6', '#a78bfa', '#34d399',
                '#fbbf24', '#f472b6', '#fb923c', '#ffffff'
            ];

            const pieces = [];
            for (let i = 0; i < 150; i++) {
                pieces.push({
                    x: canvas.width / 2 + (Math.random() - 0.5) * 200,
                    y: canvas.height / 2 - 100,
                    vx: (Math.random() - 0.5) * 16,
                    vy: -(Math.random() * 12 + 4),
                    w: 6 + Math.random() * 6,
                    h: 4 + Math.random() * 4,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    rot: Math.random() * Math.PI * 2,
                    rotV: (Math.random() - 0.5) * 0.3,
                    gravity: 0.15 + Math.random() * 0.1,
                    opacity: 1,
                    delay: Math.random() * 300
                });
            }

            const start = performance.now();
            const duration = 3500;

            function animate(now) {
                const elapsed = now - start;
                if (elapsed > duration) {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    return;
                }

                ctx.clearRect(0, 0, canvas.width, canvas.height);

                pieces.forEach(p => {
                    if (elapsed < p.delay) return;
                    const t = (elapsed - p.delay) / 1000;
                    const x = p.x + p.vx * t;
                    const y = p.y + p.vy * t + 0.5 * p.gravity * 400 * t * t;
                    const rot = p.rot + p.rotV * t * 60;

                    // Fade out in last 800ms
                    const fadeStart = duration - 800;
                    p.opacity = elapsed > fadeStart ? 1 - (elapsed - fadeStart) / 800 : 1;

                    ctx.save();
                    ctx.globalAlpha = p.opacity;
                    ctx.translate(x, y);
                    ctx.rotate(rot);
                    ctx.fillStyle = p.color;
                    ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);
                    ctx.restore();
                });

                requestAnimationFrame(animate);
            }

            requestAnimationFrame(animate);
        }

        // ==================== GIST SYNC ====================
        const GIST_FILENAME = 'ch_dashboard_state.json';
        let syncTimer = null;
        let lastSyncTime = null;

        function getGistConfig() {
            try {
                const cfg = localStorage.getItem('sc_gist_config');
                return cfg ? JSON.parse(cfg) : null;
            } catch (e) { return null; }
        }

        function debouncedGistSync() {
            if (syncTimer) clearTimeout(syncTimer);
            syncTimer = setTimeout(() => syncToGist(), 2000);
        }

        async function syncToGist() {
            const cfg = getGistConfig();
            if (!cfg) return;
            setSyncStatus('syncing');
            try {
                const res = await fetch(`https://api.github.com/gists/${cfg.gistId}`, {
                    method: 'PATCH',
                    headers: {
                        'Authorization': `Bearer ${cfg.pat}`,
                        'Content-Type': 'application/json',
                        'Accept': 'application/vnd.github+json'
                    },
                    body: JSON.stringify({
                        files: {
                            [GIST_FILENAME]: {
                                content: JSON.stringify(state, null, 2)
                            }
                        }
                    })
                });
                if (!res.ok) throw new Error(`HTTP ${res.status}`);
                lastSyncTime = new Date();
                setSyncStatus('synced');
                renderSynced();
            } catch (e) {
                console.error('Gist sync error:', e);
                setSyncStatus('error');
            }
        }

        async function syncFromGist() {
            const cfg = getGistConfig();
            if (!cfg) return;
            setSyncStatus('syncing');
            try {
                const res = await fetch(`https://api.github.com/gists/${cfg.gistId}`, {
                    headers: {
                        'Authorization': `Bearer ${cfg.pat}`,
                        'Accept': 'application/vnd.github+json'
                    }
                });
                if (!res.ok) throw new Error(`HTTP ${res.status}`);
                const gist = await res.json();
                const file = gist.files[GIST_FILENAME];
                if (file && file.content && file.content.trim() !== '{}') {
                    const remote = JSON.parse(file.content);
                    state.tasks = { ...state.tasks, ...remote.tasks };
                    state.collapsed = { ...state.collapsed, ...remote.collapsed };
                    if (remote.logs && remote.logs.length) {
                        const existingTimes = new Set(state.logs.map(l => l.time + l.text));
                        remote.logs.forEach(l => {
                            if (!existingTimes.has(l.time + l.text)) state.logs.push(l);
                        });
                    }
                    localStorage.setItem('career_hub_state', JSON.stringify(state));
                }
                lastSyncTime = new Date();
                setSyncStatus('synced');
                renderSynced();
                render();
            } catch (e) {
                console.error('Gist load error:', e);
                setSyncStatus('error');
            }
        }

        function setSyncStatus(status) {
            const dot = document.getElementById('syncDot');
            if (dot) {
                dot.className = 'sync-dot ' + status;
            }
        }

        // Settings UI
        function toggleSettings() {
            const overlay = document.getElementById('settingsOverlay');
            const isOpen = overlay.classList.toggle('open');
            if (isOpen) {
                const cfg = getGistConfig();
                if (cfg) {
                    document.getElementById('gistIdInput').value = cfg.gistId || '';
                    document.getElementById('gistPatInput').value = cfg.pat || '';
                }
            }
        }

        function saveGistSettings() {
            const gistId = document.getElementById('gistIdInput').value.trim();
            const pat = document.getElementById('gistPatInput').value.trim();
            if (!gistId || !pat) {
                alert('Both Gist ID and PAT are required.');
                return;
            }
            localStorage.setItem('sc_gist_config', JSON.stringify({ gistId, pat }));
            toggleSettings();
            syncFromGist();
        }

        async function testGistConnection() {
            const gistId = document.getElementById('gistIdInput').value.trim();
            const pat = document.getElementById('gistPatInput').value.trim();
            const btn = document.getElementById('testSyncBtn');
            if (!gistId || !pat) {
                btn.textContent = '‚ùå Fill both fields';
                setTimeout(() => btn.textContent = 'Test Connection', 2000);
                return;
            }
            btn.textContent = '‚è≥ Testing...';
            try {
                const res = await fetch(`https://api.github.com/gists/${gistId}`, {
                    headers: {
                        'Authorization': `Bearer ${pat}`,
                        'Accept': 'application/vnd.github+json'
                    }
                });
                if (res.ok) {
                    const gist = await res.json();
                    const hasFile = gist.files[GIST_FILENAME];
                    btn.textContent = hasFile ? '‚úÖ Connected!' : '‚ö†Ô∏è Gist found but no career state yet';
                } else {
                    btn.textContent = `‚ùå HTTP ${res.status}`;
                }
            } catch (e) {
                btn.textContent = '‚ùå Network error';
            }
            setTimeout(() => btn.textContent = 'Test Connection', 3000);
        }

        // ==================== NAV DRAWER ====================
        function toggleDrawer() {
            document.getElementById('navOverlay').classList.toggle('open');
            document.getElementById('navDrawer').classList.toggle('open');
        }

        // ==================== COPY NOTES ====================
        function copyLogNotes() {
            const btn = document.getElementById('copyNotesBtn');
            if (!state.logs || state.logs.length === 0) {
                btn.textContent = 'üì§ No notes to copy';
                setTimeout(() => btn.textContent = 'üì§ Copy Notes to Clipboard', 2000);
                return;
            }
            const lines = ['# Career Hub ‚Äî Prep Notes', ''];
            state.logs.slice().reverse().forEach(log => {
                const tag = log.tag ? ` #${log.tag}` : '';
                lines.push(`### ${log.time}${tag}`);
                lines.push(`> ${log.text}`);
                lines.push('');
            });
            navigator.clipboard.writeText(lines.join('\n')).then(() => {
                btn.classList.add('copied');
                btn.textContent = '‚úÖ Notes copied!';
                setTimeout(() => {
                    btn.classList.remove('copied');
                    btn.textContent = 'üì§ Copy Notes to Clipboard';
                }, 2000);
            });
        }

        // ==================== HELPERS ====================
        function getAllTasks() {
            return Object.values(TASK_DATA).flatMap(s => s.tasks);
        }
        function getAllTasksForArea(area) {
            return Object.values(TASK_DATA).filter(s => s.area === area).flatMap(s => s.tasks);
        }

        // ==================== INIT ====================
        document.getElementById('logInput').addEventListener('keydown', function (e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                addLog(this.value);
                this.value = '';
            }
        });

        // Update countdown every minute
        setInterval(() => renderCountdown(), 60000);

        render();
        // Auto-sync from Gist on startup if configured
        if (getGistConfig()) syncFromGist();
    </script>
</body>

</html>